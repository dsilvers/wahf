{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}
{% load magazine_tags %}
{% load image_tags %}

{% block extra_css %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Noto+Serif&family=Quicksand&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style type="text/css">
.banquet-border {
    border-radius: 0.375rem;
    background: transparent;
    border: 10px solid rgba(255,255,255,.4);
}

.banquet-header {
    height: 230px;
    background-image:
        linear-gradient(
        rgba(0, 0, 0, 0.5),
        rgba(0, 0, 0, 0.5)
        ),
        url("/media/banquet/c.jpg");
    background-repeat: no-repeat;
    background-size: cover;
    background-position: 75% 35%;
    border: 2px;
    cursor: pointer;
    min-height: 350px;
}

.banquet-header-image {
    position: relative;
    bottom: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.75);
}

.banquet-header-text {
    font-family: "Open Sans", sans-serif;
    color: white;
    text-shadow: 3px 3px 3px black;
    position: relative;
    top: 0;
}
.banquet-title {
    font-size: 2.4rem;
    font-family: 'Merriweather', serif;
}

.banquet-date {
    font-size: 1.2rem;
}

.banquet-blurb {
    background-color: rgba(0, 0, 0, 0.50);
    border-radius: 0.375rem;
}
</style>
{% endblock %}


{% block content %}
<style type="text/css">
figcaption {
    font-size: smaller;
    text-align: left;
    padding-left: 10px;
    padding-top: 3px;
    color: #aeaeae;
}
</style>


<div class="banquet-header banquet-border mx-1 mb-3 px-3 py-2 py-md-3 py-lg-5 px-lg-4" onclick="window.location='/rsvp';">
    <div class="banquet-header-image"></div>
    <div class="banquet-header-text">
        <div class="row">
            <div class="col-md-6 banquet-title">
                <span>37<sup>th</sup></span>
                Annual Investiture Dinner and Ceremony
            </div>
            <div class="col-md-6">
                <div class="my-3 banquet-date">
                    SATURDAY, OCTOBER 14, 2023
                </div>

                <div class="mb-3 banquet-blurb p-2">
                    Join us in celebrating the soaring achievements of aviation legends at the Wisconsin Aviation Hall of Fame induction ceremony â€“ where history takes flight!
                </div>

                <div>
                    <a href="/rsvp">
                        <button type="button" class="btn btn-primary btn-lg">
                            RSVP today!
                        </button>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row p-4 mx-1 my-3 mb-3 rounded text-bg-dark">
    {% get_current_magazine_issue as current_magazine_issue %}
    {% if user.pk > 0 and current_magazine_issue %}
        <!-- magazine preview -->
        <div class="col-md-6 px-0">
            <h1 class="display-4 fst-italic">{{ current_magazine_issue.headline }}</h1>
            <p class="lead my-2">{{ current_magazine_issue.blurb|safe }}</p>

            <p class="lead mb-0">
                <a href="{% slugurl current_magazine_issue.slug %}" class="text-white fw-bold">
                    Read <i>Forward in Flight</i>
                </a>
            </p>
        </div>

        {% if current_magazine_issue.cover %}
            <div class="col-md-6 px-0 mx-auto my-auto px-2 py-3 text-center">
                <a href="{% slugurl current_magazine_issue.slug %}">
                    {% image current_magazine_issue.cover height-400 class="img-thumbnail img-fluid" %}
                    {% caption current_magazine_issue.cover %}
                </a>
            </div>
        {% endif %}

    {% else %}
        <!-- anonymous sign in -->
        <div class="col-md-6 px-0">
            <h1 class="display-4 fst-italic">{{ page.non_member_headline }}</h1>
            <p class="lead my-3">{{ page.non_member_blurb|safe }}</p>

            {% if page.non_member_link_page and page.non_member_link_text %}
            <p class="lead mb-0">
                <a href="{% slugurl page.non_member_link_page.slug %}" class="text-white fw-bold">
                    {{ page.non_member_link_text }}
                </a>
            </p>
            {% endif %}
        </div>

        {% if page.non_member_image %}
        <div class="col-md-6 px-0 mx-auto my-auto px-3 py-3 text-center">
            {% image page.non_member_image fill-600x600 class="img-thumbnail img-fluid" %}
            {% caption page.non_member_image %}
        </div>
        {% endif %}

    {% endif %}
</div>

<div class="row mb-2">

    {% for card in page.home_page_cards.all %}
    <div class="col-md-6">
        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
            <div class="col px-3 py-3 d-flex flex-column position-static">

                <!--
                <strong class="d-inline-block mb-2 text-primary">Featured Story</strong>
                -->

                <h3 class="my-0">{{ card.heading }}</h3>

                {% if card.date %}
                <div class="mb-1 text-muted card-date">{{ card.date|date:"N j" }}</div>
                {% endif %}

                <p class="card-text mb-auto">
                    {{ card.blurb|safe }}
                </p>

                {% if card.link_page %}
                <a href="{% slugurl card.link_page.slug %}" class="stretched-link">{{ card.link_text }}</a>
                {% endif %}

            </div>

            {% if card.image %}
            <div class="col-auto d-none d-lg-block">
                {% image card.image fill-200x200 class="img-thumbnail img-fluid mx-2 my-2" %}
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}

</div>

{% endblock content %}
